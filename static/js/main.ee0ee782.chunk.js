(this.webpackJsonptest4=this.webpackJsonptest4||[]).push([[0],{132:function(e,t,n){e.exports=n(254)},138:function(e,t,n){},139:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},147:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},248:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){},254:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(18),o=n.n(r),s=(n(137),n(138),n(139),n(7)),l=(n(143),n(144),function(){return i.a.createElement("div",{className:"Logo"})}),c=(n(145),function(e){var t="button";return e.modifiers&&e.modifiers.forEach((function(e){t="themeLight"===e?t+" button_theme_light":t,t="stateWaitig"===e?t+" button_state_waiting":t,t="iconFullscreen"===e?t+" button_icon_fullscreen":t,t="iconExitFullscreen"===e?t+" button_icon_exit-fullscreen":t,t="iconExit"===e?t+" button_icon_exit":t,t="iconDots"===e?t+" button_icon_dots":t,t="iconCross"===e?t+" button_icon_cross":t,t="iconLines"===e?t+" button_icon_lines":t})),i.a.createElement("button",{type:e.type,className:t,onClick:e.onClick},e.text)}),u=function(e){var t=e.login,n=e.sublogin,a=e.logout;return i.a.createElement("div",{className:"header"},i.a.createElement("span",{className:"header__logo"},i.a.createElement(l,null)),i.a.createElement("h1",{className:"header__title"},"API-\u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043a\u0430"),i.a.createElement("span",{className:"header__user-block"},i.a.createElement("span",{className:"header__user"},i.a.createElement("span",{className:"header__login"},t),n&&i.a.createElement("span",{className:"header__sublogin"},i.a.createElement("span",{className:"header__login-separator"}," : "),n)),i.a.createElement("span",{className:"header__button"},i.a.createElement(c,{type:"button",onClick:function(){localStorage.setItem("loginData",JSON.stringify({isLogined:!1,login:null,sublogin:null,password:null})),a()},text:"\u0412\u044b\u0439\u0442\u0438",modifiers:["themeLight","iconExit"]}))))},m=n(9),d=(n(77),n(50)),f=n.n(d),_="login/LOGOUT",E="login/ERROR",g={isLogined:!1,login:null,sublogin:null,password:null,error:null,isWaiting:!1},p=function(e,t,n){return{type:"login/LOGINED",payload:{isLogined:!0,login:e,sublogin:t,password:n,error:null}}},v=function(){return{type:"login/SET_WAITING",payload:{isWaiting:!0}}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/LOGINED":case E:case _:case"login/SET_WAITING":case"login/REMOVE_WAITING":return Object(m.a)(Object(m.a)({},e),t.payload);default:return e}},b=Object(s.b)((function(e){return{isLogined:e.login.isLogined,login:e.login.login,sublogin:e.login.sublogin}}),{logout:function(){return{type:_,payload:{isLogined:!1,login:null,sublogin:null,password:null,error:null}}}})(u),y=n(28),N=n(98),O=n(99),w=function(e){if(!e)return"Field is required"},L=function(e){if(!e.match(/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/)&&!/^[a-zA-Z0-9_]+$/.test(e))return"E-mail or string"},S=function(e){if(!/^[a-zA-Z0-9_ ]+$/.test(e))return"String"},j=function(e){try{JSON.parse(e);return}catch(t){return t}},R=n(55),q=(n(147),function(e){e.input;var t=e.meta,n=t.touched,a=t.error,r=Object(R.a)(e,["input","meta"]),o=n&&a;return i.a.createElement("div",{className:"form-control"+(o?" form-control_theme_error":"")+(r.flex?" form-control_size_flex":"")},r.children)}),I=function(e){var t=e.input,n=(e.meta,Object(R.a)(e,["input","meta"]));return i.a.createElement(q,e,i.a.createElement("div",{className:"form-control__title"},e.title),e.subtitle&&i.a.createElement("div",{className:"form-control__subtitle"},e.subtitle),i.a.createElement("input",Object.assign({className:"form-control__input"+(e.password?" form-control__input_type_password":"")},t,n)))},T=function(e){var t=e.input,n=(e.meta,e.setValidationError,Object(R.a)(e,["input","meta","setValidationError"]));return i.a.createElement(q,e,i.a.createElement("div",{className:"form-control__title form-control__title_size_small"},e.title),i.a.createElement("textarea",Object.assign({className:"form-control__textarea"},t,n)))},W=n(52),x=n.n(W),V=n(102),k=n.n(V),F=function(e){var t=i.a.createElement(x.a,{id:"json-pretty",data:e});return k.a.renderToString(t).replace(/<[^<>]+>/gi,"").replace(/&nbsp;/gi,"")},D=(n(149),function(){return i.a.createElement("a",{href:"https://github.com/parunkov/test4",className:"git-hub-link",target:"_blank",rel:"noopener noreferrer"},"@parunkov")}),A=(n(150),Object(O.a)({form:"request"})((function(e){var t=e.handleSubmit,n=(e.error,e.change),r=e.response,o=(e.fieldFormattedValue,e.requestFieldValue),s=e.setRequestFieldValue,l=e.responseError,u=e.isWaiting,m=Object(a.useState)({flex:"0 0 49.6%"}),d=Object(y.a)(m,2),f=d[0],_=d[1],E=function(e){s(e),j(e)||n("request",F(e))},g=function(){var e=Object(a.useRef)();return Object(a.useEffect)((function(){var t=e.current;if(t){var n=function(e){e.preventDefault();var n=document.querySelector(".fields__container").offsetWidth,a=function(e){e.preventDefault();var t=e.clientX-i,a="0 0 ".concat(t/n*100,"%");_({flex:a})},i=e.clientX-t.getBoundingClientRect().left;document.addEventListener("mousemove",a),document.addEventListener("mouseup",(function e(t){t.preventDefault(),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",e)}))};return t.addEventListener("mousedown",n),function(){return t.removeEventListener("mousedown",n)}}}),[]),e}();return i.a.createElement("form",{onSubmit:t,className:"fields__form"},i.a.createElement("div",{className:"fields__container"},i.a.createElement("div",{className:"fields__textarea-wrapper",style:f},i.a.createElement(N.a,{component:T,name:"request",validate:[w,j],title:"\u0417\u0430\u043f\u0440\u043e\u0441:",onChange:function(e){return function(e){var t=e.target.value;E(t)}(e)},flex:"true"})),i.a.createElement("div",{className:"fields__resizer",ref:g}),i.a.createElement("div",{className:l?"fields__response-wrapper fields__response-wrapper_theme_error":"fields__response-wrapper"},i.a.createElement("div",{className:"fields__response-title"},"\u041e\u0442\u0432\u0435\u0442:"),i.a.createElement("div",{className:"fields__response"},i.a.createElement("div",{className:"fields__response-inner"},r&&i.a.createElement(x.a,{id:"json-pretty",data:JSON.stringify(r,0,2)}))))),i.a.createElement("div",{className:"fields__footer"},i.a.createElement("div",{className:"fields__send-button"},i.a.createElement(c,{type:"submit",text:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",modifiers:u?["stateWaitig"]:null})),i.a.createElement("div",{className:"fields__link"},i.a.createElement(D,null)),i.a.createElement("div",{className:"fields__format-button"},i.a.createElement(c,{type:"button",text:"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",modifiers:["themeLight","iconLines"],onClick:function(){return E(o)}}))))}))),C=function(e){var t=e.login,n=e.sublogin,a=e.password,r=(e.request,e.response),o=e.error,s=e.sendRequest,l=e.fieldFormattedValue,c=e.requestFieldValue,u=e.setRequestFieldValue,m=e.isWaiting,d=e.setWaiting;return i.a.createElement("div",{className:"fields"},i.a.createElement(A,{onSubmit:function(e){d(),s(t,n,a,JSON.parse(e.request),c)},response:r,fieldFormattedValue:l,requestFieldValue:c,setRequestFieldValue:u,responseError:o,isWaiting:m}))},H=n(40),J="history/ADD_ITEM",z={history:[]},G=function(e,t,n){return{type:J,title:e,value:t,isError:n}},M=function(e){return{type:"history/SET_SAVED_HISTORY",payload:{history:e}}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"history/SET_SAVED_HISTORY":return Object(m.a)(Object(m.a)({},e),t.payload);case"history/DELETE_ITEM":return Object(m.a)(Object(m.a)({},e),{},{history:e.history.filter((function(e){return e.title!==t.title}))});case J:var n=Object(H.a)(e.history).filter((function(e){return e.title!==t.title})).slice(-14);return Object(m.a)(Object(m.a)({},e),{},{history:[].concat(Object(H.a)(n),[{title:t.title,value:t.value,isError:t.isError}])});default:return e}},Z={request:null,response:null,error:!1,requestFieldValue:""},B=function(e){return{type:"fields/RESPONSE",payload:{response:e}}},U=function(e){return{type:"fields/SET_VALUE",payload:{requestFieldValue:e}}},X=function(e,t,n,a,i){return function(r){new f.a({auth:{login:e,sublogin:t,password:n}}).request(a).then((function(e){r(B(e)),r({type:"fields/DELETE_ERROR",payload:{error:!1}}),r(G(a.action,i,!1)),r({type:"login/REMOVE_WAITING",payload:{isWaiting:!1}})})).catch((function(e){r(B(e)),r({type:"fields/ERROR",payload:{error:!0}}),r(G(a.action,i,!0)),r({type:"login/REMOVE_WAITING",payload:{isWaiting:!1}})}))}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fields/RESPONSE":case"fields/ERROR":case"fields/DELETE_ERROR":case"fields/SET_VALUE":return Object(m.a)(Object(m.a)({},e),t.payload);default:return e}},Y=Object(s.b)((function(e){return{login:e.login.login,sublogin:e.login.sublogin,password:e.login.password,request:e.fields.request,response:e.fields.response,fieldFormattedValue:e.fields.fieldFormattedValue,requestFieldValue:e.fields.requestFieldValue,error:e.fields.error,isWaiting:e.login.isWaiting}}),{sendRequest:X,setRequestFieldValue:U,setWaiting:v})(C),K=(n(248),n(104)),Q=n(256),ee=function(e){var t=e.item,n=e.deleleHistoryItem,r=e.change,o=e.sendRequest,s=e.login,l=e.sublogin,u=e.password,m=e.openToTop,d=e.setRequestFieldValue,f=Object(a.useState)(!1),_=Object(y.a)(f,2),E=_[0],g=_[1],p=Object(a.useState)(!1),v=Object(y.a)(p,2),h=v[0],b=v[1];return Object(a.useEffect)((function(){var e=document.querySelector(".history__dropdown");if(e){var t=function(t){e.contains(t.target)||g(!1)};return window.addEventListener("click",t),function(){return window.removeEventListener("click",t)}}})),i.a.createElement("span",{className:"history__item",onMouseDown:function(){r("request","request",F(t.value)),d(t.value)}},i.a.createElement("span",{className:t.isError?"history__status history__status_theme_error":"history__status"}),i.a.createElement("span",{className:"history__title"},t.title,i.a.createElement(Q.a,{in:h,timeout:1e3,classNames:"history__item-copied",unmountOnExit:!0,onEnter:function(){return b(!0)},onExited:function(){return b(!1)}},i.a.createElement("span",{className:"history__item-copied"},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e"))),i.a.createElement("span",{className:"history__item-button"},i.a.createElement(c,{type:"button",onClick:function(){return g(!E)},text:"...",modifiers:["iconDots"]})),E&&i.a.createElement("div",{className:m?"history__dropdown history__dropdown_position_top":"history__dropdown"},i.a.createElement("div",{className:"history__dropdown-item",onClick:function(){console.log(t.value),o(s,l,u,JSON.parse(t.value),t.value),g(!1)}},"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c"),i.a.createElement(K.CopyToClipboard,{text:t.value,onCopy:function(){b(!0),g(!1),setTimeout(b,500,!1)}},i.a.createElement("div",{className:"history__dropdown-item"},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),i.a.createElement("div",{className:"history__dropdown-item-border"}),i.a.createElement("div",{className:"history__dropdown-item history__dropdown-item_theme_destructive",onClick:function(){n(t.title),g(!1)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},te=function(e){var t=e.history,n=e.change,r=e.deleleHistoryItem,o=e.sendRequest,s=e.login,l=e.sublogin,u=e.password,m=e.setSavedHistory,d=e.setRequestFieldValue,f=Object(a.useState)(!1),_=Object(y.a)(f,2),E=_[0],g=_[1];Object(a.useEffect)((function(){localStorage.setItem("history",JSON.stringify(t))}),[t]);var p=function(){var e=Object(a.useRef)();return Object(a.useEffect)((function(){var t=e.current;if(t){var n=function(){var e=document.documentElement.clientHeight-t.getBoundingClientRect().y;g(e<170)};return n(),window.addEventListener("resize",n),window.addEventListener("scroll",n),function(){window.removeEventListener("resize",n),window.removeEventListener("scroll",n)}}}),[]),e}(),v=function(){var e=Object(a.useRef)();return Object(a.useEffect)((function(){var t=e.current;if(t){var n=function(e){e.preventDefault(),t.scrollTo({left:t.scrollLeft+e.deltaY,behavior:"smooth"})};return t.addEventListener("wheel",n),function(){return t.removeEventListener("wheel",n)}}}),[]),e}();return i.a.createElement("div",{className:"history"},i.a.createElement("div",{className:"history__container",ref:v},i.a.createElement("div",{className:"history__items",ref:p},Object(H.a)(t).reverse().map((function(e,t){return i.a.createElement(ee,{key:t,className:"",item:e,deleleHistoryItem:r,change:n,sendRequest:o,login:s,sublogin:l,password:u,openToTop:E,setRequestFieldValue:d})})))),i.a.createElement("span",{className:"history__button"},i.a.createElement(c,{type:"button",onClick:function(){return m([])},text:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e",modifiers:["button_theme_light","iconCross"]}),i.a.createElement("span",{className:"history__shadow"})))},ne=n(32),ae=Object(s.b)((function(e){return{login:e.login.login,sublogin:e.login.sublogin,password:e.login.password,history:e.history.history}}),{deleleHistoryItem:function(e){return{type:"history/DELETE_ITEM",title:e}},setSavedHistory:M,change:ne.a,sendRequest:X,setRequestFieldValue:U})(te),ie=n(74),re=(n(252),function(){var e=Object(ie.b)();return i.a.createElement("div",{className:"console"},i.a.createElement("div",{className:"console__button"},!e.active&&i.a.createElement(c,{type:"button",onClick:e.enter,text:"\u041f\u043e\u043b\u043d\u043e\u044d\u043a\u0440\u0430\u043d\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c",modifiers:["themeLight","iconFullscreen"]})),i.a.createElement(ie.a,{handle:e},i.a.createElement("div",{className:"console__fields"},i.a.createElement(Y,null)),i.a.createElement("div",{className:"console__header"},i.a.createElement(b,null)),e.active&&i.a.createElement("div",{className:"console__button"},i.a.createElement(c,{type:"button",onClick:e.exit,text:"\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u043f\u043e\u043b\u043d\u043e\u044d\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0430",modifiers:["themeLight","iconExitFullscreen"]})),i.a.createElement("div",{className:"console__history"},i.a.createElement(ae,null))))}),oe=(n(253),Object(O.a)({form:"login"})((function(e){var t=e.handleSubmit,n=(e.error,e.loginError),a=e.isWaiting;return i.a.createElement("form",{onSubmit:t,className:"login__form"},i.a.createElement("h1",{className:"login__title"},"API-\u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043a\u0430"),n&&i.a.createElement("div",{className:"login__error"},i.a.createElement("div",{className:"login__error-title"},i.a.createElement("span",{className:"login__error-smile"}),i.a.createElement("span",{className:"login__error-title-text"},"\u0412\u0445\u043e\u0434 \u043d\u0435 \u0432\u044b\u0448\u0435\u043b")),i.a.createElement("div",{className:"login__error-text"},n)),i.a.createElement("div",{className:"login__input"},i.a.createElement(N.a,{component:I,name:"login",validate:[w,L],title:"\u041b\u043e\u0433\u0438\u043d"})),i.a.createElement("div",{className:"login__input"},i.a.createElement(N.a,{component:I,name:"sublogin",title:"\u0421\u0443\u0431\u043b\u043e\u0433\u0438\u043d",subtitle:"\u041e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e"})),i.a.createElement("div",{className:"login__input"},i.a.createElement(N.a,{component:I,name:"password",password:"true",validate:[w,S],type:"password",title:"\u041f\u0430\u0440\u043e\u043b\u044c"})),i.a.createElement("div",{className:"login__button"},i.a.createElement(c,{type:"submit",text:"\u0412\u043e\u0439\u0442\u0438",modifiers:a?["stateWaitig"]:null})))}))),se=function(e){var t=e.checkLogin,n=e.error,a=e.isWaiting,r=e.setWaiting;return i.a.createElement("div",{className:"login"},i.a.createElement("div",{className:"login__form-wrapper"},i.a.createElement("div",{className:"login__logo"},i.a.createElement(l,null)),i.a.createElement(oe,{onSubmit:function(e){r(),t(e.login,e.sublogin,e.password)},loginError:n,isWaiting:a}),i.a.createElement("div",{className:"login__link"},i.a.createElement(D,null))))},le=Object(s.b)((function(e){return{isLogined:e.login.isLogined,error:e.login.error,isWaiting:e.login.isWaiting}}),{checkLogin:function(e,t,n){return function(a){new f.a({auth:{login:e,sublogin:t,password:n}}).request({action:"sys.settings.get",list:["about.id"]}).then((function(i){localStorage.setItem("loginData",JSON.stringify({isLogined:!0,login:e,sublogin:t,password:n})),a(p(e,t,n)),a({type:"login/REMOVE_WAITING",payload:{isWaiting:!1}})})).catch((function(e){var t='{id: "'.concat(e.id,'", explain: "').concat(e.explain,'"}');a({type:E,payload:{error:t}}),a({type:"login/REMOVE_WAITING",payload:{isWaiting:!1}})}))}},setWaiting:v})(se),ce=n(6),ue=n(100),me=n(105),de=Object(ce.c)({login:h,fields:$,history:P,form:ue.a}),fe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ce.d,_e=Object(ce.e)(de,fe(Object(ce.a)(me.a)));window.store=_e;var Ee=_e,ge=Object(s.b)((function(e){return{isLogined:e.login.isLogined}}),{setLogin:p,setSavedHistory:M})((function(e){var t=e.isLogined,n=e.setLogin,r=e.setSavedHistory;return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("loginData"));e&&e.isLogined&&n(e.login,e.sublogin,e.password);var t=JSON.parse(localStorage.getItem("history"));t||(t=[]),r(t)}),[n,r]),i.a.createElement("div",{className:"app__console"},t?i.a.createElement(re,null):i.a.createElement(le,null))}));var pe=function(){return i.a.createElement(s.a,{store:Ee},i.a.createElement("div",{className:"app"},i.a.createElement(ge,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[132,1,2]]]);
//# sourceMappingURL=main.ee0ee782.chunk.js.map